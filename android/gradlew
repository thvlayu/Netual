#!/bin/sh

# Gradle wrapper script for Unix systems
# This file is generated by Gradle

set -e

# Determine the Java command to use
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        JAVACMD="$JAVA_HOME/jre/sh/java"
    else
        JAVACMD="$JAVA_HOME/bin/java"
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME"
    fi
else
    JAVACMD="java"
    which java >/dev/null 2>&1 || die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH."
fi

# Determine the project directory
APP_HOME="$(cd "$(dirname "$0")" && pwd -P)"

# Use gradle wrapper jar
WRAPPER_JAR="$APP_HOME/gradle/wrapper/gradle-wrapper.jar"
WRAPPER_PROPERTIES="$APP_HOME/gradle/wrapper/gradle-wrapper.properties"

# Download gradle wrapper if not present
if [ ! -e "$WRAPPER_JAR" ]; then
    echo "Downloading Gradle Wrapper..."
    GRADLE_VERSION=$(grep distributionUrl "$WRAPPER_PROPERTIES" | sed -e 's/.*gradle-\(.*\)-bin.zip/\1/')
    wget -O "$WRAPPER_JAR" "https://services.gradle.org/distributions-snapshots/gradle-${GRADLE_VERSION}-bin.zip"
fi

exec "$JAVACMD" $JAVA_OPTS -jar "$WRAPPER_JAR" "$@"
